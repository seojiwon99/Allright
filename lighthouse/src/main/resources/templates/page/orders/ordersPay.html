<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">

<!-- Content -->
<div layout:fragment="content">
    
    
    <!-- ê²°ì œ ìƒí’ˆ ì •ë³´ -->
 
    <!-- BREADCRUMB -->
    <nav class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-12">

            <!-- Breadcrumb -->
            <ol class="breadcrumb mb-0 fs-xs text-gray-400">
              <li class="breadcrumb-item">
                <a class="text-gray-400" href="/">Home</a>
              </li>
              <li class="breadcrumb-item">
                <a class="text-gray-400" th:href="@{/cart/cartView}">ì¥ë°”êµ¬ë‹ˆ</a>
              </li>
              <li class="breadcrumb-item active">
                ì£¼ë¬¸/ê²°ì œ
              </li>
            </ol>

          </div>
        </div>
      </div>
    </nav>

    <!-- CONTENT -->
    <section class="pt-7 pb-12">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center">

            <!-- Heading -->
            <h3 class="mb-4">ì£¼ë¬¸/ê²°ì œ</h3>

          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-7">

            <!-- Form -->
            <form>

              <!-- Heading -->
              <h6 class="mb-7">ì£¼ë¬¸ì ì •ë³´</h6>

              <!-- Billing details -->
              <div class="row mb-9">
                <div class="col-12">

                  <!--ì£¼ë¬¸ì ì •ë³´-->
                  <!-- ì´ë¦„ -->
                
                  <div class="form-group">
                    <div th:each="gets,index : ${get}" th:if="${index.index} < 1">
                    <label class="form-label" for="checkoutBillingFirstName">ì´ë¦„ *</label>
                    <div class="input-group mb-8">                      
                      <input type="text" class="form-control" id="mName" placeholder="ì´ë¦„ ì‘ì„±" aria-label="Recipient's username" aria-describedby="button-addon2" th:value="${gets.memberName}" readonly>                     
                      <button class="btn btn-outline-secondary" type="button" id="deliveryInfo">ë°°ì†¡ì§€ ì •ë³´ë¡œ ë“±ë¡</button>
                    </div>
                    </div>
                  </div>
                </div>

                <!-- ë°°ì†¡ì§€ ì£¼ì†Œ -->
                <div th:each="gets,index : ${get}" th:if="${index.index} < 1">
                  <div class="col-12">
                  
                    <div class="form-group">
                      <input class="form-control form-control-sm" id="mAddr" type="tel" placeholder="ë°°ì†¡ì§€ ìƒì„¸ì£¼ì†Œ" required th:value="|${gets.memberAddr} , ${gets.memberDetailsAddr}|" readonly>
                    </div>
                  </div><br>

                  <div class="col-12">
                  <!-- Email -->
                    <div class="form-group">
                      <label class="form-label" for="checkoutBillingEmail">Email *</label>
                      <input class="form-control form-control-sm" id="mEmail" type="email" placeholder="abc@abc.com" required th:value="${gets.memberEmail}" readonly>
                  </div>
                  </div>
             
                  <div class="col-12">
                  <!-- Mobile Phone -->
                    <div class="form-group">
                     <label class="form-label" for="checkoutBillingPhone">ì—°ë½ì²˜ *</label>
                     <input class="form-control form-control-sm" id="mTel" type="tel" placeholder="010-0000-0000" required th:value="${gets.memberTel}" readonly>
                    </div>
                 </div>
                </div>
                <hr>

                 <!-- Heading -->
              <h6 class="mb-7">ë°°ì†¡ ì •ë³´</h6>

                <div class="col-12">
                  <!-- Address Line 1 -->
                  <div class="form-group">
                    <label class="form-label" for="checkoutBillingAddress">ë°›ëŠ” ì‚¬ëŒ *</label>
                    <input class="form-control form-control-sm" id="deliveryName" type="text" placeholder="ì´ë¦„ ì‘ì„±" required>
                  </div>
                </div>

                <div class="col-12">
                  <!-- Address Line 2 -->
                  <div class="form-group">
                    <div class="input-group mb-8">
                      <input type="text" class="form-control" placeholder="ë°°ì†¡ì§€  ì •ë³´"  id="addr">
                      <button class="btn btn-outline-secondary" type="button" id="addressSearch">ì£¼ì†Œê²€ìƒ‰</button>
                    </div>
                  </div>
                </div>

                 <!-- ë°°ì†¡ì§€ ì£¼ì†Œ -->
                <div class="col-12">
                  <div class="form-group">
                    <input class="form-control form-control-sm" type="tel" placeholder="ë°°ì†¡ì§€ ìƒì„¸ì£¼ì†Œ" required id="addrDt">
                  </div>
                </div><br>
            
                <div class="col-12">
                  <!-- Mobile Phone -->
                  <div class="form-group mb-0">
                    <label class="form-label" for="checkoutBillingPhone">ì—°ë½ì²˜ *</label>
                    <input class="form-control form-control-sm"  type="tel" placeholder="010-0000-0000" required id="deliveryTel">
                  </div>
                  
                </div>

                <!--ìš”ì²­ ì‚¬í•­-->
                <div class="col-12">
                <br>
                <h6>ë°°ì†¡ ìš”ì²­ì‚¬í•­</h6>
                <!-- Notes -->  
                <select class="form-select form-select-lg mb-3" aria-label="Large select example" id="selbox">
                  <option selected>ë°°ì†¡ ìš”ì²­ ì„ íƒ</option>
                  <option value="1">ë¶€ì¬ì‹œ ê²½ë¹„ì‹¤ì— ë§¡ê²¨ì£¼ì„¸ìš”.</option>
                  <option value="2">ë°°ì†¡ ì „ì— ë¯¸ë¦¬ ì—°ë½ ë°”ëë‹ˆë‹¤.</option>
                  <option value="3">ë¶€ì¬ì‹œ ì „í™” ë˜ëŠ” ë¬¸ì ë‚¨ê²¨ì£¼ì„¸ìš”.</option>
                  <option value="4">ì§ì ‘ ì…ë ¥</option>
                </select>
                <input type="text" id="selectDirect" class="form-control form-control-sm" placeholder="ë°°ì†¡ ê¸°íƒ€ ìš”ì²­ì‚¬í•­ ì‘ì„±í•´ì£¼ì„¸ìš”.">

                </div>

              </div>

              <hr>
              <h6>ì¿ í° í• ì¸</h6>
              <div class="col-12">

                <!--ì£¼ë¬¸ì ì •ë³´-->
                <!-- ì´ë¦„ -->
              
                <div class="form-group">
                  <label class="form-label" for="checkoutBillingFirstName">ì¿ í° í™•ì¸ *</label>
                  <div class="input-group mb-8">
                    <input type="text" class="form-control" placeholder="ì¿ í° ì„ íƒí•˜ì„¸ìš”." aria-label="Recipient's username" aria-describedby="button-addon2">
                    <a class="btn btn-outline-secondary"  data-bs-toggle="offcanvas" href="#modalShoppingCart" >ì¿ í°ì„ íƒ</a>
                  </div>
                  <p>ì¿ í° í• ì¸ ê¸ˆì•¡ : <input type="text" style="border-width: 0 0 1px;" readonly>ì› 
                    <button class="btn btn-outline-secondary" type="button" id="button-addon2">ì‚¬ìš©í•˜ê¸°</button>
                  </p> 
                </div>
              </div>

              <hr>
              <!-- Heading -->
              <h6 class="mb-7">ê²°ì œìˆ˜ë‹¨</h6>

              <!-- List group -->
              <div class="list-group list-group-sm mb-7">
                <div class="list-group-item">

                  <!-- Radio -->
                  <div class="form-check custom-radio">

                    <!-- Input -->
                    <input class="form-check-input" id="checkoutPaymentCard" name="payment" type="radio" data-collapse="show" data-target="#checkoutPaymentCardCollapse">

                    <!-- Label -->
                    <label class="form-check-label fs-sm text-body text-nowrap" for="checkoutPaymentCard">
                     í† ìŠ¤í˜ì´ <img class="ms-2" src="assets/img/brands/color/cards.svg" alt="...">
                    </label>

                  </div>

                </div>
                <div class="list-group-item collapse py-0" id="checkoutPaymentCardCollapse">

                  <!-- Form -->
                  <div class="row gx-5 py-5">
                    <div class="col-12">
                      <div class="form-group mb-4">
                        <label class="visually-hidden" for="checkoutPaymentCardNumber">Card Number</label>
                        <input class="form-control form-control-sm" id="checkoutPaymentCardNumber" type="text" placeholder="Card Number *" required>
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="form-group mb-4">
                        <label class="visually-hidden" for="checkoutPaymentCardName">Name on Card</label>
                        <input class="form-control form-control-sm" id="checkoutPaymentCardName" type="text" placeholder="Name on Card *" required>
                      </div>
                    </div>
                    <div class="col-12 col-md-4">
                      <div class="form-group mb-md-0">
                        <label class="visually-hidden" for="checkoutPaymentMonth">Month</label>
                        <select class="form-select form-select-sm" id="checkoutPaymentMonth">
                          <option>January</option>
                          <option>February</option>
                          <option>March</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-12 col-md-4">
                      <div class="form-group mb-md-0">
                        <label class="visually-hidden" for="checkoutPaymentCardYear">Year</label>
                        <select class="form-select form-select-sm" id="checkoutPaymentCardYear">
                          <option>2017</option>
                          <option>2018</option>
                          <option>2019</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-12 col-md-4">
                      <div class="input-group input-group-merge">
                        <input class="form-control form-control-sm" id="checkoutPaymentCardCVV" type="text" placeholder="CVV *" required>
                        <div class="input-group-append">
                          <span class="input-group-text" data-bs-toggle="popover" data-bs-placement="top" data-bs-trigger="hover" data-bs-content="The CVV Number on your credit card or debit card is a 3 digit number on VISA, MasterCard and Discover branded credit and debit cards.">
                            <span><i class="fe fe-help-circle"></i></span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="list-group-item">

                  <!-- Radio -->
                  <div class="form-check custom-radio">

                    <!-- Input -->
                    <input class="form-check-input" id="checkoutPaymentPaypal" name="payment" type="radio" data-collapse="hide" data-target="#checkoutPaymentCardCollapse">

                    <!-- Label -->
                    <label class="form-check-label fs-sm text-body text-nowrap" for="checkoutPaymentPaypal">
                      ì¹´ì¹´ì˜¤í˜ì´<img src="assets/img/brands/color/paypal.svg" alt="...">
                    </label>

                  </div>

                </div>
              </div>

              

            </form>

          </div>
          <div class="col-12 col-md-5 col-lg-4 offset-lg-1">

            <!-- Heading -->
            <h6 class="mb-7">ì£¼ë¬¸ìƒí’ˆ</h6>

            <!-- Divider -->
            <hr class="my-7">

            <!-- List group -->

            <ul class="list-group list-group-lg list-group-flush-y list-group-flush-x mb-7">
              <div th:each="gets : ${get}">
                <li class="list-group-item">
                  <div class="row align-items-center">
                    <div class="col-4">
                      
                      <!-- Image -->
                      <a href="product.html">
                        <img th:src="@{/img/products/}+${gets.uploadName}" alt="..." class="img-fluid">
                      </a>

                    </div>
                    <div class="col">

                      <!-- Title -->
                      <p class="mb-4 fs-sm fw-bold">
                        <a class="text-body" href="product.html" th:text="${gets.productName}"></a>  <br>
                        <span class="text-muted" style="text-decoration: line-through;" th:text="|ìƒí’ˆê¸ˆì•¡ : ${gets.productCost}|"></span>ì› <br>
                        <span class="text-muted" th:text="|í• ì¸ëœ ê¸ˆì•¡ : ${gets.productCost - gets.salePrice}|"></span>ì›
                      </p>

                      <!-- Text -->
                      <div class="fs-sm text-muted" th:text="|${gets.optionName} : ${gets.optionValue}|"></div>
                      <div class="fs-sm text-muted" th:text="|ìˆ˜ëŸ‰ :${gets.cartCount}|"></div>
                    </div>
                  </div>
               </li>
               <hr>
              </div>
            </ul>

            <!-- Card -->
            <div class="card mb-9 bg-light">
              <div class="card-body">
                <ul class="list-group list-group-sm list-group-flush-y list-group-flush-x">
                  <li class="list-group-item d-flex">
                    <span>ìƒí’ˆê¸ˆì•¡</span> <span class="ms-auto fs-sm" id="productPrice"></span>ì›
                  </li>
                  <li class="list-group-item d-flex">
                    <span>ìƒí’ˆí• ì¸ê¸ˆì•¡</span> <span class="ms-auto fs-sm" id="salePrice"></span>ì›
                  </li>
                  <li class="list-group-item d-flex">
                    <span>ì¿ í°í• ì¸</span> <span class="ms-auto fs-sm" id="couponSale"></span>ì›
                  </li>
                  <li class="list-group-item d-flex">
                    <span>ë°°ì†¡ë¹„</span> <span class="ms-auto fs-sm" id="deliveryPrice"></span>ì›
                  </li>
                  <li class="list-group-item d-flex fs-lg fw-bold">
                    <span>ê²°ì œê¸ˆì•¡</span> <span class="ms-auto" id="totalPrice"></span>ì›
                  </li>
                </ul>
              </div>
            </div>

            <!-- Disclaimer -->
            <p class="mb-7 fs-xs text-gray-500">
              ê·€í•˜ì˜ ê°œì¸ ë°ì´í„°ëŠ” ê·€í•˜ì˜ ì£¼ë¬¸ì„ ì²˜ë¦¬í•˜ê³ , ì´ ì›¹ì‚¬ì´íŠ¸ ì „ë°˜ì— ê±¸ì³ ê·€í•˜ì˜ ê²½í—˜ì„ ì§€ì›í•˜ê³ , 
              ë‹¹ì‚¬ì˜ ê°œì¸ ì •ë³´ ë³´í˜¸ ì •ì±…ì— ì„¤ëª…ëœ ê¸°íƒ€ ëª©ì ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
            </p>

            <!-- Button -->
            <button class="btn w-100 btn-dark">
              ê²°ì œí•˜ê¸°
            </button>

          </div>
        </div>
      </div>
    </section>

    <!-- ì¿ í° í• ì¸ ëª¨ë‹¬ì°½ -->
    <div class="offcanvas offcanvas-end" id="modalShoppingCart" tabindex="-1" role="dialog" aria-hidden="true">
    
      <!-- Full cart (add `.d-none` to disable it) -->
    
      <!-- Close -->
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
        <i class="fe fe-x" aria-hidden="true"></i>
      </button>
    
      <!-- Header-->
      <div class="offcanvas-header lh-fixed fs-lg">
        <strong class="mx-auto">ë‚˜ì˜ ì¿ í°í•¨</strong>
      </div>
    
      <!-- List group -->
      <ul class="list-group list-group-lg list-group-flush">
        <div th:each="gets :${get}">
          <li class="list-group-item">
            <div class="row align-items-center">
              <div class="col-8">
      
                <!-- Title -->
                <p class="fs-sm fw-bold mb-6">
                  <a class="text-body" href="./product.html" th:text="${gets.couponName}"></a> <br>
                  <span class="text-muted">$40.00</span>
                </p>
      
                <!--Footer -->
                <div class="d-flex align-items-center">
      
                  <!-- Select -->
                  <select class="form-select form-select-xxs w-auto">
                    <option value="1">1</option>
                    <option value="1">2</option>
                    <option value="1">3</option>
                  </select>
      
                  <!-- Remove -->
                  <a class="fs-xs text-gray-400 ms-auto" href="#!">
                    <i class="fe fe-x"></i> Remove
                  </a>
      
                </div>
      
              </div>
            </div>
          </li>
          <hr>
        </div>
      </ul>
    
      <!-- Footer -->
      <div class="offcanvas-footer justify-between lh-fixed fs-sm bg-light mt-auto">
        <strong>í• ì¸ê¸ˆì•¡</strong> <strong class="ms-auto">$89.00</strong>
      </div>
    
      <!-- Buttons -->
      <div class="offcanvas-body">
        <a class="btn w-100 btn-dark" href="./checkout.html">Continue to Checkout</a>
        <a class="btn w-100 btn-outline-dark mt-2" href="./shopping-cart.html">View Cart</a>
      </div>
    
      <!-- Empty cart (remove `.d-none` to enable it) -->
      <div class="d-none">
    
        <!-- Close -->
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
          <i class="fe fe-x" aria-hidden="true"></i>
        </button>
    
        <!-- Header-->
        <div class="offcanvas-header lh-fixed fs-lg">
          <strong class="mx-auto">Your Cart (0)</strong>
        </div>
    
        <!-- Body -->
        <div class="offcanvas-body flex-grow-0 my-auto">
    
          <!-- Heading -->
          <h6 class="mb-7 text-center">Your cart is empty ğŸ˜</h6>
    
          <!-- Button -->
          <a class="btn w-100 btn-outline-dark" href="#!">
            Continue Shopping
          </a>
    
        </div>
    
      </div>
    
    </div>

    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script th:inline="javascript">
    //ì£¼ì†Œ apië¡œ ì…ë ¥
    $('#addressSearch').on('click', addrPopup)
    function addrPopup(){
        new daum.Postcode({
            oncomplete: function(data) {
                $('#addr').val(data.address);
                $("#addrDt").focus();
            }
        
        /*
            onclose: function(state) {
            //stateëŠ” ìš°í¸ë²ˆí˜¸ ì°¾ê¸° í™”ë©´ì´ ì–´ë–»ê²Œ ë‹«í˜”ëŠ”ì§€ì— ëŒ€í•œ ìƒíƒœ ë³€ìˆ˜ ì´ë©°, ìƒì„¸ ì„¤ëª…ì€ ì•„ë˜ ëª©ë¡ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            if(state === 'FORCE_CLOSE'){
                //ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì € ë‹«ê¸° ë²„íŠ¼ì„ í†µí•´ íŒì—…ì°½ì„ ë‹«ì•˜ì„ ê²½ìš°, ì‹¤í–‰ë  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.

            } else if(state === 'COMPLETE_CLOSE'){
                //ì‚¬ìš©ìê°€ ê²€ìƒ‰ê²°ê³¼ë¥¼ ì„ íƒí•˜ì—¬ íŒì—…ì°½ì´ ë‹«í˜”ì„ ê²½ìš°, ì‹¤í–‰ë  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
                //oncomplete ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ ì™„ë£Œëœ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
            }
        }
        */
        }).open();
    }

    //p1 : ìƒí’ˆ ê¸ˆì•¡  p2: ìƒí’ˆ í• ì¸ ê¸ˆì•¡ p3: ë°°ì†¡ë¹„ p4 : ì´ê¸ˆì•¡  ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ì—ì„œ ê°€ì ¸ì˜´
    let p1Result = Number(localStorage.pPrice.slice(0,-1));
    let p2Result = Number(localStorage.pPrice2.slice(0,-1));
    let p3Result = Number(localStorage.pPrice3.slice(0,-1));
    let p4Result = Number(localStorage.pPrice4.slice(0,-1));
    $('#productPrice').text(p1Result);
    $('#salePrice').text(p2Result);
    $('#deliveryPrice').text(p3Result);
    $('#totalPrice').text(p4Result);
    
    //ë°°ì†¡ ìš”ì²­ ì‚¬í•­ ì§ì ‘ ì…ë ¥ì‹œ ìƒì„±
    $('#selectDirect').hide();
    $('#selbox').change(function(){
      if($('#selbox').val() == 4) {
        $('#selectDirect').show();
      } else {
        $('#selectDirect').hide();
      }
    });

    // ë°°ì†¡ ìš”ì²­ ì‚¬í•­ ë³¸ì¸ ë‚´ìš© ë„˜ê¸¸ ë•Œ ë²„íŠ¼
    $('#deliveryInfo').on('click', function(e){
    	let getMemberAddr = [[${get[0].memberAddr}]];
      let getMemberDetailsAddr = [[${get[0].memberDetailsAddr}]];
        $('#deliveryName').val($('#mName').val());
        $('#addr').val(getMemberAddr);
        $('#addrDt').val(getMemberDetailsAddr);
        $('#deliveryTel').val($('#mTel').val());
    });
    
   
    </script>
    
</div>
</html>