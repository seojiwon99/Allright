<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.ar.lighthouse.cart.mapper.CartMapper">
  	
  	<!-- 장바구니 상세정보 -->
  	<select id="selectCartList" resultType="com.ar.lighthouse.cart.service.CartVO" parameterType="String">
  		SELECT c.cart_count, 
  			   c.cart_code, 
  			   o.option_name, 
  			   o.option_value, 
  			   p.product_name, 
  			   p.delivery_cost, 
  			   (p.product_cost + o.option_price) product_cost, 
  			   p.sale_price, 
  			   g.upload_name,
  			   g.upload_path
			FROM ar_cart c
			LEFT OUTER JOIN ar_option o ON c.option_code = o.option_code
			LEFT OUTER JOIN ar_products p ON o.product_code = p.product_code
			LEFT OUTER JOIN ar_imgs g ON g.product_code = p.product_code
			LEFT OUTER JOIN ar_member m ON m.member_id = c.member_id
		where c.member_id = #{memberId}
  	</select>
  	
  	<delete id="deleteCart">
  		DELETE ar_cart where member_id = #{memberId} AND cart_code = #{cartCode} 
  	</delete>
  	
  </mapper>